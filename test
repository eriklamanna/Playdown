INPUT=$(ls Tests/*.swift)

for file in $INPUT
do
  swift Playdown.swift "$file"
  fn=Tests/"$(basename "$file")".expected
  markdown=Tests/$(basename "$file" .swift).markdown
  diff -Bwu $markdown "$fn"

  if [ $? -ne 0 ]
  then
    echo "$file - failed"
    echo
    echo "Output"
    echo "======"
    echo
    swift Playdown.swift "$file"
    echo
  else
    echo "$file - passed"
  fi

  rm $markdown
done
